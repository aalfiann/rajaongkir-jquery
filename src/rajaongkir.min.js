/**
 * RajaOngkir API jQuery plugin
 * @author          M ABD AZIZ ALFIAN
 * @version         1.1.1
 * @repository      https://github.com/aalfiann/rajaongkir-jquery
 */
!function(r){r.fn.RajaOngkir=function(c,t){if(!r.trim(c))throw new Error("RajaOngkir Account Type is required!");if(!r.trim(t))throw new Error("RajaOngkir API Key is required!");var i={apikey:t,api_url:"https://"+("pro"!==(c=c.toLowerCase())?"api":"pro")+".rajaongkir.com/"+("pro"!==c?c:"api")+"/",cors_proxy:"https://cors-anywhere.herokuapp.com/"},n={url:"",method:"get",data:"",headers:{"content-type":"application/x-www-form-urlencoded",key:i.apikey}};return this.randomText=function(t){var e,i=new Date,n=("00"+(i.getMonth()+1)).slice(-2)+""+("00"+i.getDate()).slice(-2)+i.getFullYear()+"-"+("00"+i.getHours()).slice(-2),r=i.getMinutes(),o=t,a=0;for(e=0;e<=60;e+=o)e<=r&&a++;return n+a},this.endpoint=function(t){var e="";return-1!==t.indexOf("international")&&(e="v2/"),i.cors_proxy+i.api_url+e+t+"?_="+this.randomText(5)},this.makeRequest=function(t){var e=r.extend({},n,t);return r.ajax({url:e.url,type:e.method,data:e.data,headers:e.headers})},this.province=function(t){return this.makeRequest({url:this.endpoint("province"),method:"get",data:{id:t}})},this.city=function(t,e){return this.makeRequest({url:this.endpoint("city"),method:"get",data:{id:t,province:e}})},this.cost=function(t,e,i,n,r,o,a,s,h,u){var d={origin:t,originType:r,destination:e,destinationType:o,weight:parseInt(i),courier:n,length:a,width:s,height:h,diameter:u};return"pro"!==c&&(delete d.originType,delete d.destinationType,delete d.length,delete d.width,delete d.height,delete d.diameter),this.makeRequest({url:this.endpoint("cost"),method:"post",data:d})},this.subdistrict=function(t,e){return this.makeRequest({url:this.endpoint("subdistrict"),method:"get",data:{city:t,id:e}})},this.internationalOrigin=function(t,e){return this.makeRequest({url:this.endpoint("internationalOrigin"),method:"get",data:{id:t,province:e}})},this.internationalDestination=function(t){return this.makeRequest({url:this.endpoint("internationalDestination"),method:"get",data:{id:t}})},this.internationalCost=function(t,e,i,n,r,o,a){return this.makeRequest({url:this.endpoint("internationalCost"),method:"post",data:{origin:t,destination:e,weight:parseInt(i),courier:n,length:r,width:o,height:a}})},this.currency=function(){return this.makeRequest({url:this.endpoint("currency"),method:"get"})},this.waybill=function(t,e){return this.makeRequest({url:this.endpoint("waybill"),method:"post",data:{courier:t,waybill:e}})},this}}(jQuery);